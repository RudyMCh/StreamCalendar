{% extends "base.html.twig" %}
{% block title %}mon profil{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap@4.1.0/main.min.css">
{% endblock %}
{% block body %}
<h1 class="text-center" style="margin-top:25px;margin-bottom:25px;">mon profil</h1>

<div class="container-fluid">
    
    <div class="row">
        <div class="info mx-auto" style="min-height:100px;">
            <p>Mes Informations</p>
            <p>nom: {{app.session.get('account').name}}</p>
            <p>email: {{app.session.get('account').email}}</p>
        </div>
    </div>    
    
    <div class="row">
        <div class="col-md-6 offset-md-3"></div>
    </div>

    <div class="row">
        <div id="bloodhound" class="col-8 mx-auto text-center" style="margin-top:30px;min-height:100px">
            <label>Choisissez votre streamer :<br>
                <input class="typeahead" type="text" placeholder="Streamer">
            </label>
        </div>
    </div>

</div>

{% endblock %}

{% block javascripts %}
  

    <script>
        var targetExtract = "{{ url('extract') }}";       
    </script>
    
    {#
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/locales/fr.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap@4.1.0/main.min.js"></script>

    <script src="{{asset('js/scriptViewerCalendar.js')}}" type="text/javascript"></script>
    #}

    <script src="{{asset('js/typeahead.bundle.js')}}" type="text/javascript"></script>

    <script>
            var states= {{streamerList|escape|json_encode|raw}};

            var aaastates = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
            'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
            'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
            'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
            'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
            'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
            'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
            'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
            'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
          ];

    // constructs the suggestion engine
    var states = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.whitespace,
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        // `states` is an array of state names defined in "The Basics"
        local: states
    });
    
    $('#bloodhound .typeahead').typeahead({
        hint: true,
        highlight: true,
        minLength: 1
    },
    {
        name: 'states',
        source: states
    });

    var selectedStreamer;
    $('.typeahead').on('typeahead:selected', function(event,data){
        selectedStreamer=data;
        console.log('selectionné 1: ' + selectedStreamer);
        
        $.ajax({
            type: 'POST',
            url: {{ path('recordFavorite') }},
            dataType: 'json',
            data: {name: selectedStreamer},
            success: function(data) {

                console.log('OK OK OK');

            }
        });
        console.log('selectionné 2: ' + selectedStreamer);
    });

    

    </script>

       
{% endblock %}